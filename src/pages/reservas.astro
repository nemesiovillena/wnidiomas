---
import MainLayout from '../layouts/MainLayout.astro';
import Section from '../components/ui/Section.astro';
import Container from '../components/ui/Container.astro';
import { getSiteSettings } from '../lib/payload-local';

const siteSettings = await getSiteSettings();
const pageTitle = `Reservas | ${siteSettings?.title || "Warynessy"}`;
---

<MainLayout title={pageTitle}>
  <Section class="bg-matte-black min-h-screen flex items-center justify-center py-32">
    <Container class="w-full max-w-4xl">
      <div class="text-center mb-12">
        <h1 class="text-4xl md:text-6xl font-display font-black text-white mb-4">Haz tu Reserva</h1>
        <p class="text-white/60 text-lg">Reserva tu mesa online de forma rápida y sencilla.</p>
      </div>

      <div class="bg-matte-black rounded-2xl overflow-hidden shadow-2xl min-h-[600px] border border-white/5">
        <div id="covermanager-widget" class="w-full">
           <script src="https://www.covermanager.com/js/iframeResizer.min.js"></script>
           <iframe
             src="https://www.covermanager.com/reservation/module_restaurant/restaurante-warynessy/spanish"
             style="width: 100%; min-height: 600px; border: none;"
             id="restaurante-warynessy"
             title="Reservas"
             allow="payment"
             onload="iFrameResize();"
           ></iframe>
        </div>
      </div>

      <div class="mt-12 text-center">
         <p class="text-white/40 mb-2">¿Prefieres llamar?</p>
         {siteSettings?.contact?.phone && (
            <a href={`tel:${siteSettings.contact.phone}`} class="text-2xl font-serif font-bold text-primary hover:text-white transition-colors">
              {siteSettings.contact.phone}
            </a>
         )}
      </div>
    </Container>
  </Section>
</MainLayout>
