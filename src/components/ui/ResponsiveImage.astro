---
interface Props {
  src: string;
  alt: string;
  class?: string;
  sizes?: string; // e.g. "(min-width: 1024px) 1024px, 100vw"
  aspectRatio?: string; // e.g. "16/9"
  lazy?: boolean;
}

import { getOptimizedImageUrl } from '../../lib/cdn';

const { 
  src, 
  alt, 
  class: className = '', 
  sizes = "100vw", 
  aspectRatio, 
  lazy = true 
} = Astro.props;

const imageSrc = getOptimizedImageUrl(src);
---

<div class:list={["overflow-hidden bg-white/5", className]} style={aspectRatio ? `aspect-ratio: ${aspectRatio};` : ''}>
  <img
    src={imageSrc}
    alt={alt}
    loading={lazy ? "lazy" : "eager"}
    decoding="async"
    class="w-full h-full object-cover transition-transform duration-700 hover:scale-105"
  />
</div>
